---
const { src, alt, className, transition } = Astro.props;
---

<img src={src} alt={alt} class={className} transition:name={transition} />

<style>
  .card-image {
    border-radius: 0.5rem 0.5rem 0rem 0rem;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* SKELETON */
  .skeleton {
    animation: skeleton-loading 1s linear infinite alternate;
  }

  @keyframes skeleton-loading {
    0% {
      background-color: rgb(167, 167, 167);
    }

    100% {
      background-color: rgb(43, 42, 42);
    }
  }
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const image = document.querySelector('.card-image');
    image.addEventListener('load', function () {
      // Add a small delay to ensure the transition effect is visible
      setTimeout(function () {
        image.classList.remove('skeleton');
      }, 100);
    });
  });
</script>
